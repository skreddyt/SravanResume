{"ast":null,"code":"import Group from '../shapes/group';\nimport Point from '../geometry/point';\nimport SurfaceFactory from './surface-factory';\nimport { Observable } from '../common';\nimport { eventElement, eventCoordinates, elementStyles, elementSize, elementOffset } from '../util';\nvar events = [\"click\", \"mouseenter\", \"mouseleave\", \"mousemove\", \"resize\"];\n\nvar Surface = function (Observable) {\n  function Surface(element, options) {\n    Observable.call(this);\n    this.options = Object.assign({}, options);\n    this.element = element;\n    this.element._kendoExportVisual = this.exportVisual.bind(this);\n    this._click = this._handler(\"click\");\n    this._mouseenter = this._handler(\"mouseenter\");\n    this._mouseleave = this._handler(\"mouseleave\");\n    this._mousemove = this._handler(\"mousemove\");\n    this._visual = new Group();\n    elementSize(element, this.options);\n    this.bind(events, this.options);\n\n    this._enableTracking();\n  }\n\n  if (Observable) Surface.__proto__ = Observable;\n  Surface.prototype = Object.create(Observable && Observable.prototype);\n  Surface.prototype.constructor = Surface;\n\n  Surface.prototype.draw = function draw(element) {\n    this._visual.children.push(element);\n  };\n\n  Surface.prototype.clear = function clear() {\n    this._visual.children = [];\n  };\n\n  Surface.prototype.destroy = function destroy() {\n    this._visual = null;\n    this.element._kendoExportVisual = null;\n    this.unbind();\n  };\n\n  Surface.prototype.eventTarget = function eventTarget(e) {\n    var this$1 = this;\n    var domNode = eventElement(e);\n    var node;\n\n    while (!node && domNode) {\n      node = domNode._kendoNode;\n\n      if (domNode === this$1.element) {\n        break;\n      }\n\n      domNode = domNode.parentElement;\n    }\n\n    if (node) {\n      return node.srcElement;\n    }\n  };\n\n  Surface.prototype.exportVisual = function exportVisual() {\n    return this._visual;\n  };\n\n  Surface.prototype.getSize = function getSize() {\n    return elementSize(this.element);\n  };\n\n  Surface.prototype.currentSize = function currentSize(size) {\n    if (size) {\n      this._size = size;\n    } else {\n      return this._size;\n    }\n  };\n\n  Surface.prototype.setSize = function setSize(size) {\n    elementSize(this.element, size);\n    this.currentSize(size);\n\n    this._resize();\n  };\n\n  Surface.prototype.resize = function resize(force) {\n    var size = this.getSize();\n    var currentSize = this.currentSize();\n\n    if (force || (size.width > 0 || size.height > 0) && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n      this.currentSize(size);\n\n      this._resize(size, force);\n\n      this.trigger(\"resize\", size);\n    }\n  };\n\n  Surface.prototype.size = function size(value) {\n    if (!value) {\n      return this.getSize();\n    }\n\n    this.setSize(value);\n  };\n\n  Surface.prototype.suspendTracking = function suspendTracking() {\n    this._suspendedTracking = true;\n  };\n\n  Surface.prototype.resumeTracking = function resumeTracking() {\n    this._suspendedTracking = false;\n  };\n\n  Surface.prototype._enableTracking = function _enableTracking() {};\n\n  Surface.prototype._resize = function _resize() {};\n\n  Surface.prototype._handler = function _handler(eventName) {\n    var this$1 = this;\n    return function (e) {\n      var node = this$1.eventTarget(e);\n\n      if (node && !this$1._suspendedTracking) {\n        this$1.trigger(eventName, {\n          element: node,\n          originalEvent: e,\n          type: eventName\n        });\n      }\n    };\n  };\n\n  Surface.prototype._elementOffset = function _elementOffset() {\n    var element = this.element;\n    var ref = elementStyles(element, [\"paddingLeft\", \"paddingTop\"]);\n    var paddingLeft = ref.paddingLeft;\n    var paddingTop = ref.paddingTop;\n    var ref$1 = elementOffset(element);\n    var left = ref$1.left;\n    var top = ref$1.top;\n    return {\n      left: left + parseInt(paddingLeft, 10),\n      top: top + parseInt(paddingTop, 10)\n    };\n  };\n\n  Surface.prototype._surfacePoint = function _surfacePoint(e) {\n    var offset = this._elementOffset();\n\n    var coord = eventCoordinates(e);\n    var x = coord.x - offset.left;\n    var y = coord.y - offset.top;\n    return new Point(x, y);\n  };\n\n  return Surface;\n}(Observable);\n\nSurface.create = function (element, options) {\n  return SurfaceFactory.current.create(element, options);\n};\n\nSurface.support = {};\nexport default Surface;","map":null,"metadata":{},"sourceType":"module"}