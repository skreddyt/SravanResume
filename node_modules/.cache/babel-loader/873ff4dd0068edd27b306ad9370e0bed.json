{"ast":null,"code":"import * as ReactDOM from 'react-dom';\nimport * as React from 'react';\nimport { exportElement } from './export-element';\n/**\n * @hidden\n */\n\nexport function provideSaveGridPDF(savePDF) {\n  return function (grid, pdfExportOptions, callback, data, columns) {\n    if (pdfExportOptions === void 0) {\n      pdfExportOptions = {};\n    }\n\n    return saveGridPDF(savePDF, grid, pdfExportOptions, callback, data, columns);\n  };\n}\n\nfunction saveGridPDF(savePDF, grid, pdfExportOptions, callback, data, columns) {\n  if (pdfExportOptions === void 0) {\n    pdfExportOptions = {};\n  }\n\n  renderGrid();\n  var gridOuterWrapper;\n  var gridInnerWrapper;\n  var finalContainer;\n\n  function renderGrid() {\n    gridOuterWrapper = document.createElement('div');\n    gridOuterWrapper.setAttribute('style', 'position:absolute; left: -5000px; top: 0px;');\n    gridInnerWrapper = document.createElement('div');\n    gridOuterWrapper.appendChild(gridInnerWrapper);\n    document.body.appendChild(gridOuterWrapper);\n    ReactDOM.render(prepareRawGridForExport(), gridInnerWrapper, onGridRendered);\n  }\n\n  function onGridRendered() {\n    savePDF(prepareFinalElementForExport(), pdfExportOptions, cleanUpAndInvokeCallback);\n  }\n\n  function cleanUpAndInvokeCallback() {\n    document.body.removeChild(gridOuterWrapper);\n    document.body.removeChild(finalContainer);\n    gridOuterWrapper = finalContainer = undefined;\n\n    if (callback) {\n      callback();\n    }\n  }\n\n  function prepareFinalElementForExport() {\n    /* Ultimatelly, there is no need for double DOM-copying of the grid.\n    The one in this method is a copied Angular implementation\n    that has been plugged almost seemlessly. */\n    finalContainer = document.createElement('div');\n    finalContainer.className = 'k-grid-pdf-export-element';\n    var result = exportElement(gridInnerWrapper);\n    finalContainer.appendChild(result);\n    document.body.appendChild(finalContainer);\n    return result;\n  }\n\n  function prepareRawGridForExport() {\n    var customDataProps = data && {\n      data: data,\n      total: data.length,\n      pageSize: data.length,\n      skip: 0\n    }; // A custom width is needed because otherwise when all pages are exported,\n    // the \"hidden\" PDF grid will be visible.\n\n    var customStyleProp = {\n      style: Object.assign({}, grid.props.style, {\n        width: '1000px'\n      })\n    };\n    var customProps = Object.assign({}, customDataProps, customStyleProp);\n\n    if (columns && columns.length > 0) {\n      var notColumnChildren = getGridNotColumnChildren(grid);\n      return React.cloneElement(grid, customProps, columns.concat(notColumnChildren));\n    } else {\n      return React.cloneElement(grid, customProps);\n    }\n  }\n}\n\nfunction getGridNotColumnChildren(grid) {\n  return React.Children.toArray(grid.props.children).filter(function (child) {\n    return child && child.type.displayName !== 'KendoReactGridColumn';\n  });\n}","map":null,"metadata":{},"sourceType":"module"}