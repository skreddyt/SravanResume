{"ast":null,"code":"import * as easingFunctions from './easing-functions';\nimport { limitValue } from '../util';\nimport { animationFrame, Class } from '../common';\nimport AnimationFactory from './animation-factory';\n\nvar now = Date.now || function () {\n  return new Date().getTime();\n};\n\nvar Animation = function (Class) {\n  function Animation(element, options) {\n    Class.call(this);\n    this.options = Object.assign({}, this.options, options);\n    this.element = element;\n  }\n\n  if (Class) Animation.__proto__ = Class;\n  Animation.prototype = Object.create(Class && Class.prototype);\n  Animation.prototype.constructor = Animation;\n\n  Animation.prototype.setup = function setup() {};\n\n  Animation.prototype.step = function step() {};\n\n  Animation.prototype.play = function play() {\n    var this$1 = this;\n    var options = this.options;\n    var duration = options.duration;\n    var delay = options.delay;\n    if (delay === void 0) delay = 0;\n    var easing = easingFunctions[options.easing];\n    var start = now() + delay;\n    var finish = start + duration;\n\n    if (duration === 0) {\n      this.step(1);\n      this.abort();\n    } else {\n      setTimeout(function () {\n        var loop = function () {\n          if (this$1._stopped) {\n            return;\n          }\n\n          var wallTime = now();\n          var time = limitValue(wallTime - start, 0, duration);\n          var position = time / duration;\n          var easingPosition = easing(position, time, 0, 1, duration);\n          this$1.step(easingPosition);\n\n          if (wallTime < finish) {\n            animationFrame(loop);\n          } else {\n            this$1.abort();\n          }\n        };\n\n        loop();\n      }, delay);\n    }\n  };\n\n  Animation.prototype.abort = function abort() {\n    this._stopped = true;\n  };\n\n  Animation.prototype.destroy = function destroy() {\n    this.abort();\n  };\n\n  return Animation;\n}(Class);\n\nAnimation.prototype.options = {\n  duration: 500,\n  easing: \"swing\"\n};\n\nAnimation.create = function (type, element, options) {\n  return AnimationFactory.current.create(type, element, options);\n};\n\nexport default Animation;","map":null,"metadata":{},"sourceType":"module"}