{"ast":null,"code":"import { Class } from '../common';\n\nvar LRUCache = function (Class) {\n  function LRUCache(size) {\n    Class.call(this);\n    this._size = size;\n    this._length = 0;\n    this._map = {};\n  }\n\n  if (Class) LRUCache.__proto__ = Class;\n  LRUCache.prototype = Object.create(Class && Class.prototype);\n  LRUCache.prototype.constructor = LRUCache;\n\n  LRUCache.prototype.put = function put(key, value) {\n    var map = this._map;\n    var entry = {\n      key: key,\n      value: value\n    };\n    map[key] = entry;\n\n    if (!this._head) {\n      this._head = this._tail = entry;\n    } else {\n      this._tail.newer = entry;\n      entry.older = this._tail;\n      this._tail = entry;\n    }\n\n    if (this._length >= this._size) {\n      map[this._head.key] = null;\n      this._head = this._head.newer;\n      this._head.older = null;\n    } else {\n      this._length++;\n    }\n  };\n\n  LRUCache.prototype.get = function get(key) {\n    var entry = this._map[key];\n\n    if (entry) {\n      if (entry === this._head && entry !== this._tail) {\n        this._head = entry.newer;\n        this._head.older = null;\n      }\n\n      if (entry !== this._tail) {\n        if (entry.older) {\n          entry.older.newer = entry.newer;\n          entry.newer.older = entry.older;\n        }\n\n        entry.older = this._tail;\n        entry.newer = null;\n        this._tail.newer = entry;\n        this._tail = entry;\n      }\n\n      return entry.value;\n    }\n  };\n\n  return LRUCache;\n}(Class);\n\nexport default LRUCache;","map":null,"metadata":{},"sourceType":"module"}